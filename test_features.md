# 击打高玩机器人功能测试指南

## 新增功能测试

### 1. 速率限制 (Rate Limit) 测试

#### 击打命令速率限制 (3秒冷却)
1. 发送 `/hit @某用户`
2. 立即再次发送 `/hit @某用户`
3. 应该看到冷却提示消息
4. 等待3秒后再次尝试，应该能正常使用

#### 其他命令速率限制 (1秒冷却)
1. 发送 `/stats`
2. 立即再次发送 `/stats`
3. 应该看到冷却提示消息
4. 等待1秒后再次尝试，应该能正常使用

### 2. 群聊命令限制测试

#### 在群聊中测试
1. 在群聊中发送 `/hit @某用户` - ✅ 应该正常工作
2. 在群聊中发送 `/stats` - ❌ 应该显示限制提示
3. 在群聊中发送 `/leaderboard` - ❌ 应该显示限制提示
4. 在群聊中发送 `/achievements` - ❌ 应该显示限制提示
5. 在群聊中发送 `/help` - ❌ 应该显示限制提示
6. 在群聊中发送 `/start` - ❌ 应该显示限制提示

#### 在私聊中测试
1. 在私聊中发送任何命令 - ✅ 应该都能正常工作

### 3. 新增调试命令测试

#### /ratelimit 命令
1. 在私聊中发送 `/ratelimit`
2. 应该显示当前用户的速率限制状态
3. 在群聊中发送 `/ratelimit` - ❌ 应该显示群聊限制提示

## 测试场景

### 场景1：群聊快速击打
1. 在群聊中快速连续发送多个 `/hit` 命令
2. 验证3秒冷却是否生效
3. 验证冷却期间的提示消息

### 场景2：群聊中尝试使用其他命令
1. 在群聊中尝试各种非 `/hit` 命令
2. 验证是否都被正确拦截
3. 验证提示消息是否友好且包含私聊链接

### 场景3：私聊中正常使用
1. 在私聊中测试所有命令
2. 验证速率限制是否正确应用
3. 验证功能是否正常

### 场景4：冷却时间精确性
1. 记录命令发送时间
2. 验证冷却剩余时间显示是否准确
3. 验证冷却结束后能否立即使用

## 预期行为

### 速率限制
- 击打命令：3秒冷却，显示剩余秒数
- 其他命令：1秒冷却，显示剩余秒数
- 冷却期间重复使用会显示友好的等待提示

### 群聊限制
- 只允许 `/hit` 命令在群聊中使用
- 其他命令显示限制提示，引导用户私聊机器人
- 提示消息包含机器人用户名和私聊链接

### 用户体验
- 错误提示友好且具有指导性
- 冷却时间显示精确到秒
- 不影响正常使用流程

## 注意事项

1. 确保 `.env` 文件中设置了正确的 `BOT_TOKEN`
2. 如果设置了 `BOT_USERNAME`，群聊限制提示中会显示正确的用户名
3. 速率限制是基于用户ID的，不同用户之间不会相互影响
4. 群聊和私聊的限制是独立的
