# Hitball Bot 击打高玩机器人！

群友太嚣张了，忍不了了，怎么办？

还好，聪明的CC发明了击打高玩机器人！它可以让你合法地暴打群友的高玩！

• **优点**
  ◦ 不用真的动手，但是效果拔群
  ◦ 自动统计战绩，让你知道谁的高玩最抗揍
  ◦ 防止自残，毕竟打自己的高玩是没意义的
  ◦ 数据持久化，重启也不会丢失你的光辉战绩
  ◦ 机器人反弹保护，攻击机器人会反弹伤害
  ◦ 智能用户识别，支持多种击打方式
  ◦ 速率限制防刷屏，连续违规会被禁言

• **缺点**  
  ◦ 只能线上击打高玩，无法造成真实伤害
  ◦ 可能会让群友记恨你

## 使用效果

我们先来打个人试试吧！

```
用户A: /hit @用户B
```

```
💥 用户A 给了 @用户B 一记重拳！
📊 @用户B 已被击打 5 次！
```

看起来效果不错，用户B被揍得挺惨的！

再看看排行榜——

```
/leaderboard
```

```
🏆 击打排行榜 🏆
🥇 @用户B - 5 次
🥈 @用户E - 3 次  
🥉 @用户F - 2 次
```

用户B果然是抗击打冠军！

好，接下来我们来查看一下统计数据——

```
/stats @用户B
```

```
📊 击打统计报告
@用户B 已被击打 5 次！
```

数据记录得很详细呢！

## 原理

其实原理非常简单。群友在群里说话的时候，你回复他们的消息然后发送 `/hit`，机器人就会记录下这次击打。

### 数据存储

举个例子，张三被打了，机器人会在 `data.json` 里记录：

```json
{
  "hitData": {
    "123456789": {
      "name": "张三",
      "username": "zhangsan",
      "count": 1,
      "firstHitDate": "2024-01-01T10:00:00.000Z",
      "lastHitDate": "2024-01-01T10:00:00.000Z"
    }
  },
  "bounceAchievements": {
    "123456789": {
      "name": "张三",
      "username": "zhangsan", 
      "hasBounceAchievement": true,
      "firstBounceDate": "2024-01-01T10:30:00.000Z"
    }
  }
}
```

下次张三又被打了，`count` 就会变成 2。就这么简单！

### 智能用户识别

机器人现在能够智能地同步和维护用户信息：

- **实时同步**: 每当用户发送消息、被回复或被转发时，自动更新用户信息
- **API获取**: 通过Telegram API获取群组成员的最新信息
- **双向查找**: 支持通过用户ID或用户名查找用户
- **数据一致性**: 确保ID和用户名的映射关系准确无误

### 排行榜生成

每次有人查看排行榜的时候，机器人就把所有人的击打次数拿出来排个序，然后显示前几名。

机器学习？不需要。神经网络？也不需要。就是个智能的计数器！

## 使用方法

首先你需要有一个Telegram账号，然后找到 [@BotFather](https://t.me/botfather) 创建一个机器人。

获得token之后，把这个仓库clone回去，在 `.env` 文件里填入你的token，然后 `pnpm install && pnpm start`，就行了。

接口是这样的——

```bash
# 基础击打命令
/hit @用户名       # 击打指定用户名的高玩
/hit 123456789     # 通过用户ID击打高玩
/hit               # 回复某人消息后使用，击打被回复用户的高玩

# 统计查询命令  
/stats             # 查看自己的高玩受击统计
/stats @用户名     # 查看指定用户的高玩受击统计
/leaderboard       # 查看高玩受击排行榜

# 成就系统
/achievements      # 查看自己的高玩成就

# 帮助信息
/help              # 获取完整使用指南
/start             # 开始使用机器人
```

## 结束

这是一个狠命击打你ball的bot！